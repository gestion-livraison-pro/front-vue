import{bF as r,bW as h,bB as u,az as m,q as p,r as s,bu as c,bj as d,a_ as _,bx as f,z as g}from"./index-3afa6c13.js";const v={data(){return{password:"",email:"",isLoading:!1}},methods:{...r("auth",["setUsername","setIsAuth"]),...r("permissions",["fetchPermissions"]),login(){const i={email:this.email,password:this.password};this.isLoading=!0,h.post("https://api.gestion-livraison.pro/api/login",i).then(async e=>{if(e.status==200){let a=e.data.token,l=e.data.name;localStorage.setItem("token",a),localStorage.setItem("username",l),this.setUsername(l),await this.fetchPermissions(),this.$router.push({name:"dashboard",meta:{requiresAuth:!0}}),this.setIsAuth(!0),alertify.success("connexion réussie")}}).catch(e=>{console.log(e),alertify.error("verifier les champs svp!!! "+e.response.data.error)}).finally(()=>{this.isLoading=!1})}}},b={class:"mb-3"},x=s("label",{class:"form-label",for:"username"},"E-mail",-1),w={class:"mb-3"},y=s("label",{class:"form-label",for:"userpassword"},"Mot de Passe",-1),k={class:"row mt-4"},I=s("div",{class:"col-6"},[s("div",{class:"form-check"},[s("input",{class:"form-check-input",type:"checkbox",value:"",id:"customControlInline"}),s("label",{class:"form-check-label",for:"customControlInline"}," Souviens-toi de moi ")])],-1),S={class:"col-6 text-end"},$=["disabled"];function z(i,e,a,l,t,n){return m(),p("form",{class:"form-horizontal",onSubmit:e[2]||(e[2]=f((...o)=>n.login&&n.login(...o),["prevent"]))},[s("div",b,[x,c(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>t.email=o),class:"form-control",id:"username",placeholder:"ex : Client@exeñple.com"},null,512),[[d,t.email]])]),s("div",w,[y,c(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=o=>t.password=o),class:"form-control",id:"userpassword",placeholder:"********"},null,512),[[d,t.password]])]),s("div",k,[I,s("div",S,[s("button",{class:"btn btn-primary w-md waves-effect waves-light",type:"submit",disabled:t.isLoading},_(t.isLoading?"Connexion en cours...":"Se connecter"),9,$)])])],32)}const C=u(v,[["render",z]]),L={class:"account-pages pt-5"},A={class:"container"},B={class:"row justify-content-center"},U={class:"col-md-8 col-lg-5 col-xl-4"},V=s("a",{href:"/",class:"d-flex justify-content-center my-4"},[s("img",{src:"https://api.gestion-livraison.pro/public/images/logo-dark-2.png",alt:"",height:"100",class:"auth-logo logo-dark"}),s("img",{src:"https://api.gestion-livraison.pro/public/images/logo-dark2.png",alt:"",height:"100",class:"auth-logo logo-light"})],-1),j={class:"card"},D={class:"card-body"},M=s("div",{class:"d-flex p-3"},[s("div",{class:"text-center"},[s("h4",{class:"font-size-18 text-center"},"Connectez-vous !")])],-1),P={class:"p-3"},E={__name:"login",setup(i){return(e,a)=>(m(),p("div",L,[s("div",A,[s("div",B,[s("div",U,[V,s("div",j,[s("div",D,[M,s("div",P,[g(C)])])])])])])]))}};export{E as default};
