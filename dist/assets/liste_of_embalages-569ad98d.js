import{bB as m,aH as h,bC as v,aM as _,az as i,q as l,F as p,aK as b,r as t,a_ as u,z as n,bs as x,aD as k,aA as y}from"./index-3afa6c13.js";import{S as w}from"./delete-6aebbd9b.js";import{b as S}from"./basic-8cbb2de4.js";import{f as D}from"./search-e618f654.js";import"./select-ab6ad5d3.js";import"./defineProperty-b185edd1.js";const I={components:{Supprimer:w},props:{apiUrl:{type:String,required:!0},filters_update:{type:String,required:!0}},data(){return{data:[],filters:h([]),delete_row_id:null,deletedRow:"",loading:!1}},methods:{async getFetchData(e=null){this.loading=!0;const s=await v(this.apiUrl+e);console.log(s),this.data=s,console.log(this.data),this.loading=!1}},mounted(){this.getFetchData("")},watch:{filters_update(e){this.filters=e,this.getFetchData(e)},deletedRow(e){const s=this.data.findIndex(r=>r.id===parseInt(e));s!==-1&&this.data.splice(s,1)}}},c=e=>(k("data-v-956392fc"),e=e(),y(),e),$={key:0,class:"row"},C={class:"card position-relative"},F=["src"],U={class:"card-body text-center"},R={class:"card-title"},B={class:"row d-flex justify-content-center mt-3"},N=c(()=>t("i",{class:"fas fa-pencil-alt"},null,-1)),q=["onClick"],E=c(()=>t("i",{class:"fas fa-trash-alt"},null,-1)),L=[E],j={key:1,class:"d-flex justify-content-center py-4 bg-light"},z=c(()=>t("span",{class:"loader"},null,-1)),M=[z],T={key:2,class:"card p-3 text-center"},V=c(()=>t("p",null,"no-data",-1)),A=[V];function H(e,s,r,d,a,W){const f=_("router-link"),g=_("Supprimer");return i(),l(p,null,[a.data.length>0?(i(),l("div",$,[(i(!0),l(p,null,b(a.data,o=>(i(),l("div",{class:"col-xl-3 col-md-4",key:o.id},[t("div",C,[t("img",{class:"card-img-top",src:"https://api.gestion-livraison.pro/"+o.Img,alt:"Card image cap"},null,8,F),t("div",U,[t("p",null,u(o.Nom),1),t("p",R,u(o.Prix)+" Dh",1),t("div",B,[n(f,{to:`/package/${o.id}/update`,class:"btn bg-light btn-sm waves-effect col-5 mx-1"},{default:x(()=>[N]),_:2},1032,["to"]),t("button",{type:"button",class:"btn bg-light btn-sm waves-effect col-5 mx-1",onClick:X=>{a.delete_row_id=o.id},"data-bs-toggle":"modal","data-bs-target":"#DeleteRow"},L,8,q)])])])]))),128))])):a.loading?(i(),l("div",j,M)):(i(),l("div",T,A)),n(g,{apiUrl:`https://api.gestion-livraison.pro/api/package/${a.delete_row_id}/delete`,onDeletedId:s[0]||(s[0]=o=>a.deletedRow=o)},null,8,["apiUrl"])],64)}const K=m(I,[["render",H],["__scopeId","data-v-956392fc"]]),P={class:"main-content"},G={class:"page-content"},J={class:"container-fluid"},O={class:"card"},Q={class:"card-body"},ot={__name:"liste_of_embalages",setup(e){const s=h(null);return(r,d)=>(i(),l("div",P,[t("div",G,[t("div",J,[n(S,{pageTitle:"Liste des Embalages",buttonText:"Nouveau Embalage",buttonLink:"package/new"}),t("div",O,[t("div",Q,[n(D,{placeholder:"Rechercher par Motcle",onFilterUpdated:d[0]||(d[0]=a=>s.value=a),filters_fields:"search"})])]),n(K,{apiUrl:"https://api.gestion-livraison.pro/api/packages",filters_update:s.value},null,8,["filters_update"])])])]))}};export{ot as default};
