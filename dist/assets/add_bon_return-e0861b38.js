import{bB as p,az as i,q as _,r as s,z as a,bx as h,o as b,p as n,aH as l,bG as f,aD as v,aA as g}from"./index-3afa6c13.js";import{t as d}from"./add_bon-0d655d19.js";import{h as c}from"./heading-f00730b6.js";import{S as u}from"./select-ab6ad5d3.js";import{b as m}from"./simple-2283d124.js";const w=e=>(v("data-v-130d6d7b"),e=e(),g(),e),y={class:"main-content"},S={class:"page-content"},U={class:"container-fluid"},D={class:"row"},B={class:"col-md-8"},C={class:"col-md-4"},O={class:"card"},F={class:"card-body"},N=w(()=>s("h5",null,"Bon de Retour",-1)),R={class:"row"},V={class:"col-md-12 mt-4"},k={components:{table_add_bon:d,heading:c,SelectDropdown:u,button_simple:m},data(){return{selectedOrders:l([]),test:l([]),filters:{customer:""},newUrl:null,query_search:""}},methods:{search(e,t){this.query_search=this.constructApiUrlWithFilters(),window.history.pushState({},"",this.newUrl)},constructApiUrlWithFilters(){const e=new URLSearchParams;for(const t in this.filters)this.filters[t]&&e.append(t,this.filters[t]);return this.newUrl=`${window.location.pathname}?${e.toString()}`,`?${e.toString()}`},async submitForm(){console.log(this.selectedOrders),console.log(this.filters.customer);const e={CustomerId:this.filters.customer,selectedRows:this.selectedOrders,colis:this.selectedOrders.length};await f("https://api.gestion-livraison.pro/api/bon/customer/return/new",e)},handleTableData(e){console.log(e),this.selectedOrders=e}},onMounted(){this.$on("selectedOrders",e=>{this.selectedOrders=e,console.log("orders"),console.log(e)})}},q=Object.assign(k,{__name:"add_bon_return",setup(e){return(t,o)=>(i(),_("div",y,[s("div",S,[s("div",U,[a(c,{pageTitle:"Nouveau Bon de Livraison"}),s("form",{onSubmit:o[2]||(o[2]=h((...r)=>t.submitForm&&t.submitForm(...r),["prevent"]))},[s("div",D,[s("div",B,[a(d,{apiUrl:"https://api.gestion-livraison.pro/api/bon/return/customer/orders",onTableData:t.handleTableData,filters_update:t.query_search},null,8,["onTableData","filters_update"])]),s("div",C,[s("div",O,[s("div",F,[N,s("div",R,[t.Role!="customer"&&t.Role!="deliveryman"?(i(),b(u,{key:0,apiUrl:"https://api.gestion-livraison.pro/api/customers?per_page=200",fieldName:"Nom",first_option:"Selectionner un Client",label:"Filtrer Par Client",Class_Content:"col-md-12 mt-4",modelValue:t.filters.customer,"onUpdate:modelValue":o[0]||(o[0]=r=>t.filters.customer=r),value:t.filters.customer,"onUpdate:value":o[1]||(o[1]=r=>{t.filters.customer=r,t.search("customer",r)})},null,8,["modelValue","value"])):n("",!0),s("div",V,[a(m,{type:"submit",Class_Content:"col-md-12 mt-4",btn_text:"Ajouter le Bon Retour"})])])])]),n("",!0)])])],32)])])]))}}),j=p(q,[["__scopeId","data-v-130d6d7b"]]);export{j as default};
