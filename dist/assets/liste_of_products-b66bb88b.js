import{bB as y,aH as f,bJ as k,aM as h,az as a,q as n,F as _,aK as u,r as t,a_ as c,p as g,z as r,bs as m,bu as C,bi as w,aj as D,x as S,y as F}from"./index-3afa6c13.js";import{S as P}from"./delete-6aebbd9b.js";import{f as U}from"./search-e618f654.js";import"./select-ab6ad5d3.js";import"./defineProperty-b185edd1.js";const N={components:{Supprimer:P},props:{apiUrl:{type:String,required:!0},filters_update:{type:String,required:!0}},data(){return{pagination:[],filters:"",pagination_filters:"",per_page:8,page:1,data:[],filters:f([]),delete_row_id:null,deletedRow:"",loading:!1}},methods:{loadPage(i){this.page=i;let s;this.filters.length>0?s=this.filters+"&page="+this.page+"&per_page="+this.per_page:s="?page="+this.page+"&per_page="+this.per_page,this.getFetchData(s)},pageCount(){let i;this.filters.length>0?i=this.filters+"&page="+this.page+"&per_page="+this.per_page:i="?page="+this.page+"&per_page="+this.per_page,this.getFetchData(i),console.log(i)},async getFetchData(i){this.loading=!0;const s=await k(this.apiUrl+i);this.data=s.data,this.pagination=s.pagination,this.loading=!1}},mounted(){this.getFetchData("")},watch:{filters_update(i){this.filters=i,this.getFetchData(i)},deletedRow(i){const s=this.data.findIndex(d=>d.id===parseInt(i));s!==-1&&this.data.splice(s,1)}}},V={key:0,class:"row"},j={class:"card"},q=["src"],R={class:"card-body text-center"},B={class:"card-title p-2"},T={class:"row d-flex align-items-center"},z={key:0,class:"col-md-12 border p-2"},E=t("p",{class:"text-mute text-start"},"Client",-1),I={class:""},M={class:"col-md-6 border p-2"},L=t("p",{class:"text-mute text-start"},"Embalage",-1),Q={class:""},H={class:"col-md-6 border p-2"},J=t("p",{class:"text-mute text-start"},"Quantite",-1),K={class:""},$={class:"badge bg-success"},A={class:"row d-flex align-items-center"},G={class:"col-md-6 border p-2"},O=t("p",{class:"text-mute text-start"},"Categorie",-1),W={class:""},X={class:"col-md-6 border p-2"},Y=t("p",{class:"text-mute text-start"},"type",-1),Z={class:""},tt={class:"row d-flex justify-content-center mt-3"},et=t("i",{class:"fas fa-pencil-alt"},null,-1),st=["onClick"],ot=t("i",{class:"fas fa-trash-alt"},null,-1),it=[ot],at={class:"card"},nt={class:"card-body"},lt={class:"row d-flex justify-content-between align-items-center"},ct={class:"col-md-1"},rt=S('<option value="8">8</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="200">200</option><option value="500">500</option><option value="1000">1000</option>',7),dt=[rt],pt={class:"col-md-6 d-flex justify-content-end align-items-center"},_t={class:"pagination d-flex align-items-center"},gt={key:0,class:"page-item"},ht=["onClick"],ut={key:1,class:"page-item"},ft={key:1,class:"d-flex justify-content-center py-4 bg-light"},mt=t("span",{class:"loader"},null,-1),vt=[mt],bt={key:2,class:"card p-3 text-center"},xt=t("p",null,"no-data",-1),yt=[xt];function kt(i,s,d,p,o,l){const v=h("router-link"),b=h("Supprimer");return a(),n(_,null,[o.data.length?(a(),n("div",V,[(a(!0),n(_,null,u(o.data,e=>(a(),n("div",{class:"col-xl-3 col-md-4",key:e.id},[t("div",j,[t("img",{class:"card-img-top",src:"https://api.gestion-livraison.pro/"+e.img,alt:"Card image cap"},null,8,q),t("div",R,[t("p",B,c(e.Titre),1),t("div",T,[e.Client?(a(),n("div",z,[E,t("strong",I,c(e.Client),1)])):g("",!0),t("div",M,[L,t("strong",Q,c(e.Embalage),1)]),t("div",H,[J,t("h5",K,[t("div",$,c(e.Quantite),1)])])]),t("div",A,[t("div",G,[O,t("strong",W,c(e.Categorie),1)]),t("div",X,[Y,t("strong",Z,c(e.Type),1)])]),t("div",tt,[r(v,{to:`/product/${e.id}/update`,class:"btn bg-light btn-sm waves-effect col-5 mx-1"},{default:m(()=>[et]),_:2},1032,["to"]),t("button",{type:"button",class:"btn bg-light btn-sm waves-effect col-5 mx-1",onClick:x=>{o.delete_row_id=e.id},"data-bs-toggle":"modal","data-bs-target":"#DeleteRow"},it,8,st)])])])]))),128)),t("div",at,[t("div",nt,[t("div",lt,[t("div",ct,[C(t("select",{class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>o.per_page=e),onChange:s[1]||(s[1]=(...e)=>l.pageCount&&l.pageCount(...e))},dt,544),[[w,o.per_page]])]),t("nav",pt,[t("ul",_t,[o.pagination.current_page>1?(a(),n("li",gt,[t("a",{class:"page-link",href:"#",onClick:s[2]||(s[2]=e=>l.loadPage(o.pagination.current_page-1))},"Précédent")])):g("",!0),(a(!0),n(_,null,u(o.pagination.last_page,e=>(a(),n("li",{class:D(["page-item",{active:e===o.pagination.current_page}]),key:e},[t("a",{class:"page-link",href:"#",onClick:x=>l.loadPage(e)},c(e),9,ht)],2))),128)),o.pagination.current_page<o.pagination.last_page?(a(),n("li",ut,[t("a",{class:"page-link",href:"#",onClick:s[3]||(s[3]=e=>l.loadPage(o.pagination.current_page+1))},"Suivant")])):g("",!0)])])])])])])):o.loading?(a(),n("div",ft,vt)):(a(),n("div",bt,yt)),r(b,{apiUrl:`https://api.gestion-livraison.pro/api/product/${o.delete_row_id}/delete`,onDeletedId:s[4]||(s[4]=e=>o.deletedRow=e)},null,8,["apiUrl"])],64)}const Ct=y(N,[["render",kt]]),wt={class:"main-content"},Dt={class:"page-content"},St={class:"container-fluid"},Ft={class:"page-title-box"},Pt={class:"row align-items-center"},Ut=t("div",{class:"col-md-6"},[t("h6",{class:"page-title"},"Liste des Produits")],-1),Nt={class:"col-md-6"},Vt={class:"float-end d-none d-md-block"},jt={class:"card"},qt={class:"card-body"},It={__name:"liste_of_products",setup(i){const s=f(null);return(d,p)=>{const o=h("router-link");return a(),n("div",wt,[t("div",Dt,[t("div",St,[t("div",Ft,[t("div",Pt,[Ut,t("div",Nt,[t("div",Vt,[r(o,{to:"/product/new",class:"btn btn-primary mx-1"},{default:m(()=>[F("Nouveau Produit")]),_:1})])])])]),t("div",jt,[t("div",qt,[r(U,{placeholder:"Rechercher par Motcle",onFilterUpdated:p[0]||(p[0]=l=>s.value=l),filters_fields:"productType,customer,search,productCategory"})])]),r(Ct,{apiUrl:"https://api.gestion-livraison.pro/api/products",filters_update:s.value},null,8,["filters_update"])])])])}}};export{It as default};
