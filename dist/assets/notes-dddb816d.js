import{b as F}from"./heading_modal-8cb43ed1.js";import{bB as S,bI as M,bG as k,bJ as R,aM as h,az as i,q as l,r as e,F as c,aK as _,a_ as g,y as x,bu as v,bi as f,p as w,aj as I,bx as U,z as p,aD as T,aA as A,x as b,aH as N}from"./index-3afa6c13.js";import{i as V}from"./input-e668dea8.js";import{b as q}from"./simple-2283d124.js";import{S as P}from"./select-ab6ad5d3.js";import{S as j}from"./delete-6aebbd9b.js";import{f as B}from"./search-e618f654.js";import"./defineProperty-b185edd1.js";const L={components:{input_text:V,button_simple:q,SelectDropdown:P,Supprimer:j},data(){return{pagination:[],filters:"",pagination_filters:"",per_page:10,page:1,formData:{id:"",Message:"",Type:"",RoleId:""},data:[],tableFields:[],module:[],delete_row_id:"",deletedRow:"",loading:!1}},props:{apiUrl:{type:String,required:!0},Module:{type:String,required:!0},filters_update:{type:String,required:!0},hidden_columns:{type:Object,required:!0}},methods:{loadPage(s){this.page=s;let t;this.filters?t=this.filters+"&page="+this.page+"&per_page="+this.per_page:t="?page="+this.page+"&per_page="+this.per_page,this.getFetchData(t)},pageCount(){let s;this.filters?s=this.filters+"&page="+this.page+"&per_page="+this.per_page:s="?page="+this.page+"&per_page="+this.per_page,this.getFetchData(s),console.log(s)},async submitFormUpdate(){console.log(this.formData);const s=this.formData.id,t=await M(`https://api.gestion-livraison.pro/api/note/${s}/update`,this.formData);t.data&&(this.formData={id:"",id:"",Message:"",Type:"",RoleId:""},$("#modalUpdate").modal("hide"));const n=this.data.findIndex(u=>u.id===t.data.id);n!==-1&&(this.data[n]={...this.data[n],...t.data})},openUpdateModal(s){this.formData={...s},$("#modalUpdate").modal("show")},async submitFormAdd(){console.log(this.formData);const s=await k("https://api.gestion-livraison.pro/api/note/new",this.formData);s.data&&(this.formData={id:"",Message:"",Type:"",RoleId:""},$("#modalAdd").modal("hide")),this.data.push(s.data)},async getFetchData(s=null){this.loading=!0;const t=await R(this.apiUrl+s);this.data=t.data,this.pagination=t.pagination,this.data.length>0&&(this.tableFields=Object.keys(t.data[0]),this.tableFields=this.tableFields.filter(n=>!this.hidden_columns.includes(n))),this.loading=!1}},mounted(){this.getFetchData("")},watch:{filters_update(s){this.page=1,this.filters=s,this.getFetchData(s)},deletedRow(s){const t=this.data.findIndex(n=>n.id===parseInt(s));t!==-1&&this.data.splice(t,1)}}},d=s=>(T("data-v-5822e297"),s=s(),A(),s),z={key:0,class:"table-responsive"},O={class:"table table-bordered"},E={class:"bg-light"},G=d(()=>e("th",null,"Action",-1)),H={class:"header_side"},J={class:"table_actions"},K={class:"d-flex align-items-center order-actions"},Q=["onClick"],W=d(()=>e("i",{class:"fas fa-pencil-alt"},null,-1)),X=[W],Y=["onClick"],Z=d(()=>e("i",{class:"fas fa-trash-alt"},null,-1)),ee=[Z],te={class:"row d-flex justify-content-between align-items-center"},oe={class:"col-md-1"},ae=b('<option value="10" data-v-5822e297>10</option><option value="20" data-v-5822e297>20</option><option value="50" data-v-5822e297>50</option><option value="100" data-v-5822e297>100</option><option value="200" data-v-5822e297>200</option><option value="500" data-v-5822e297>500</option><option value="1000" data-v-5822e297>1000</option>',7),se=[ae],ie={class:"col-md-6 d-flex justify-content-end align-items-center"},le={class:"pagination d-flex align-items-end"},ne={key:0,class:"page-item"},de=["onClick"],re={key:1,class:"page-item"},pe={key:1,class:"d-flex justify-content-center py-4 bg-light"},me=d(()=>e("span",{class:"loader"},null,-1)),ue=[me],ce={key:2,class:"p-3 text-center bg-light"},_e=d(()=>e("p",null,"no-data",-1)),ge=[_e],he={id:"modalUpdate",class:"modal fade",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"},ve={class:"modal-dialog"},fe={class:"modal-content"},be=d(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title mt-0",id:"myModalLabel"},"Mdofier Remarque"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),ye={class:"modal-body"},De={class:"col-md-12 mt-4"},we=d(()=>e("label",{for:""},"Type",-1)),Ue=["value"],Ce=b('<option selected disabled data-v-5822e297>Selectionner un Type</option><option value="warning" data-v-5822e297>Avertissement</option><option value="info" data-v-5822e297>Information</option><option value="danger" data-v-5822e297>Danger</option><option value="success" data-v-5822e297>Bonnes Nouvelles</option>',5),Fe=[Ce],Se=d(()=>e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary waves-effect waves-light","data-bs-dismiss":"modal"},"Fermer"),e("button",{type:"submit",class:"btn btn-primary waves-effect waves-light"},"Modifier")],-1)),Me={id:"modalAdd",class:"modal fade",tabindex:"-1","aria-labelledby":"modalAdd","aria-hidden":"true"},ke={class:"modal-dialog"},Re={class:"modal-content"},xe=d(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title mt-0",id:"modalAdd"},"Nouvelle Remarque"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Ie={class:"modal-body"},Te={class:"col-md-12 mt-4"},Ae=d(()=>e("label",{for:""},"Type",-1)),Ne=["value"],Ve=b('<option selected disabled data-v-5822e297>Selectionner un Type</option><option value="warning" data-v-5822e297>Avertissement</option><option value="info" data-v-5822e297>Information</option><option value="danger" data-v-5822e297>Danger</option><option value="success" data-v-5822e297>Bonnes Nouvelles</option>',5),qe=[Ve],Pe=d(()=>e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary waves-effect waves-light","data-bs-dismiss":"modal"},"Fermer"),e("button",{type:"submit",class:"btn btn-primary waves-effect waves-light"},"Ajouter")],-1));function je(s,t,n,u,a,r){const y=h("SelectDropdown"),D=h("input_text"),C=h("Supprimer");return i(),l(c,null,[a.data.length>0?(i(),l("div",z,[e("table",O,[e("thead",E,[e("tr",null,[(i(!0),l(c,null,_(a.tableFields,o=>(i(),l("th",{key:o},g(o),1))),128)),G])]),e("tbody",null,[(i(!0),l(c,null,_(a.data,o=>(i(),l("tr",{key:o.id},[(i(!0),l(c,null,_(a.tableFields,m=>(i(),l("td",{key:m},[e("span",H,g(m)+" : ",1),x(" "+g(o[m]),1)]))),128)),e("td",J,[e("div",K,[e("button",{type:"button",class:"btn bg-light btn-sm waves-effect mx-1",onClick:m=>r.openUpdateModal(o)},X,8,Q),e("button",{type:"button",class:"btn bg-light btn-sm waves-effect mx-1",onClick:m=>{a.delete_row_id=o.id},"data-bs-toggle":"modal","data-bs-target":"#DeleteRow"},ee,8,Y)])])]))),128))])]),e("div",te,[e("div",oe,[v(e("select",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=o=>a.per_page=o),onChange:t[1]||(t[1]=(...o)=>r.pageCount&&r.pageCount(...o))},se,544),[[f,a.per_page]])]),e("nav",ie,[e("ul",le,[a.pagination.current_page>1?(i(),l("li",ne,[e("a",{class:"page-link",href:"#",onClick:t[2]||(t[2]=o=>r.loadPage(a.pagination.current_page-1))},"Précédent")])):w("",!0),(i(!0),l(c,null,_(a.pagination.last_page,o=>(i(),l("li",{class:I(["page-item",{active:o===a.pagination.current_page}]),key:o},[e("a",{class:"page-link",href:"#",onClick:m=>r.loadPage(o)},g(o),9,de)],2))),128)),a.pagination.current_page<a.pagination.last_page?(i(),l("li",re,[e("a",{class:"page-link",href:"#",onClick:t[3]||(t[3]=o=>r.loadPage(a.pagination.current_page+1))},"Suivant")])):w("",!0)])])])])):a.loading?(i(),l("div",pe,ue)):(i(),l("div",ce,ge)),e("div",he,[e("form",{onSubmit:t[9]||(t[9]=U((...o)=>r.submitFormUpdate&&r.submitFormUpdate(...o),["prevent"]))},[e("div",ve,[e("div",fe,[be,e("div",ye,[p(y,{value:a.formData.RoleId,apiUrl:"https://api.gestion-livraison.pro/api/roles",fieldName:"Nom",first_option:"Selectionner un Role",label:"Role",Class_Content:"col-md-12 mt-4","onUpdate:value":t[4]||(t[4]=o=>a.formData.RoleId=o)},null,8,["value"]),p(D,{modelValue:s.Message,"onUpdate:modelValue":t[5]||(t[5]=o=>s.Message=o),label:"Message",type:"text",Class_Content:"col-md-12 mt-4",value:a.formData.Message,"onUpdate:value":t[6]||(t[6]=o=>a.formData.Message=o)},null,8,["modelValue","value"]),e("div",De,[we,v(e("select",{class:"form-control","onUpdate:modelValue":t[7]||(t[7]=o=>s.Type=o),"onUpdate:value":t[8]||(t[8]=o=>a.formData.Type=o),value:a.formData.Type},Fe,40,Ue),[[f,s.Type]])])]),Se])])],32)]),e("div",Me,[e("form",{onSubmit:t[15]||(t[15]=U((...o)=>r.submitFormAdd&&r.submitFormAdd(...o),["prevent"]))},[e("div",ke,[e("div",Re,[xe,e("div",Ie,[p(y,{value:a.formData.RoleId,apiUrl:"https://api.gestion-livraison.pro/api/roles",fieldName:"Nom",first_option:"Selectionner un Role",label:"Role",Class_Content:"col-md-12 mt-4","onUpdate:value":t[10]||(t[10]=o=>a.formData.RoleId=o)},null,8,["value"]),p(D,{modelValue:s.Message,"onUpdate:modelValue":t[11]||(t[11]=o=>s.Message=o),label:"Message",type:"text",Class_Content:"col-md-12 mt-4",value:a.formData.Message,"onUpdate:value":t[12]||(t[12]=o=>a.formData.Message=o)},null,8,["modelValue","value"]),e("div",Te,[Ae,v(e("select",{class:"form-control","onUpdate:modelValue":t[13]||(t[13]=o=>a.formData.Type=o),"onUpdate:value":t[14]||(t[14]=o=>a.formData.Type=o),value:a.formData.Type},qe,40,Ne),[[f,a.formData.Type]])])]),Pe])])],32)]),p(C,{apiUrl:`https://api.gestion-livraison.pro/api/note/${a.delete_row_id}/delete`,onDeletedId:t[16]||(t[16]=o=>a.deletedRow=o)},null,8,["apiUrl"])],64)}const Be=S(L,[["render",je],["__scopeId","data-v-5822e297"]]),Le={class:"main-content"},ze={class:"page-content"},Oe={class:"container-fluid"},Ee={class:"row"},Ge={class:"card"},He={class:"card-body"},Je={class:"mb-3"},tt={__name:"notes",setup(s){const t=N(null);return(n,u)=>(i(),l("div",Le,[e("div",ze,[e("div",Oe,[p(F,{pageTitle:"Liste des Remqrques",toggle:"modal",target:"#modalAdd",modalText:"Nouvelle Remarque"}),e("div",Ee,[e("div",Ge,[e("div",He,[e("div",Je,[p(B,{placeholder:"Rechercher par Motcle",onFilterUpdated:u[0]||(u[0]=a=>t.value=a),filters_fields:"search"})]),p(Be,{apiUrl:"https://api.gestion-livraison.pro/api/notes",onDataToParent:n.handleDataFromChild,onSubmitFormAdd:n.submitFormAdd,filters_update:t.value,hidden_columns:["id","RoleId"]},null,8,["onDataToParent","onSubmitFormAdd","filters_update"])])])])])])]))}};export{tt as default};
