import{bB as T,bD as V,bL as N,bI as w,bC as k,bG as A,bJ as F,aM as C,az as i,q as n,r as e,p,F as f,aK as v,a_ as d,y as h,z as c,aj as U,bu as y,bi as R,o as D,bj as I,aD as P,aA as j,x as q,aH as M}from"./index-3afa6c13.js";import{i as L}from"./input-e668dea8.js";import{b as Q}from"./simple-2283d124.js";import{S as B}from"./select-ab6ad5d3.js";import{c as z}from"./check-fe9a82f7.js";import{S as E}from"./delete-6aebbd9b.js";import{b as O}from"./heading_modal-8cb43ed1.js";import{f as G}from"./search-e618f654.js";import"./defineProperty-b185edd1.js";const H={components:{input_text:L,button_simple:Q,SelectDropdown:B,checkd:z,Supprimer:E},data(){return{pagination:[],filters:"",pagination_filters:"",per_page:10,page:1,formData:{Nom:"",Ville:"",Adresse:"",nbrColis:"",Colis:1,Stock:0,id:null,cartItems:[],ClientID:"",Valid:"",Téléphone:""},isEditMode:!1,data:[],tableFields:[],module:[],products:[],searchInput:"",Role:V(),delete_row_id:"",deletedRow:"",loading:!1}},props:{apiUrl:{type:String,required:!0},Module:{type:String,required:!0},filters_update:{type:String,required:!0}},methods:{checkModule(l){const o=N(l);return console.log(o),o},async toggleValid(l){l.Valid=l.Valid===1?0:1,await w(`https://api.gestion-livraison.pro/api/pickup/${l.id}/valid/update`,{Valid:l.Valid})},async submitFormUpdate(){console.log(this.formData);const l=this.formData.id,o=await w(`https://api.gestion-livraison.pro/api/pickup/${l}/update`,this.formData);o.data&&(this.formData={Nom:"",Ville:"",Adresse:"",nbrColis:"",Colis:1,Stock:0,id:"",cartItems:[],ClientID:"",Valid:"",Téléphone:""},$("#modalUpdate").modal("hide"));const u=this.data.findIndex(g=>g.id===o.data.id);u!==-1&&(this.data[u]={...this.data[u],...o.data})},async openUpdateModal(l){if(this.formData={...l},console.log(l),console.log(this.formData),l.Stock){const o=await k(`https://api.gestion-livraison.pro/api/pickup/${l.id}/stock/products/get`);this.formData.cartItems={...o},console.log(o)}$("#modalUpdate").modal("show")},async openInfoModal(l){if(console.log(l.Adresse),console.log("RamData"),console.log(l),console.log(this.formData),this.formData={...l},l.Stock){const o=await k(`https://api.gestion-livraison.pro/api/pickup/${l.id}/stock/products/get`);this.formData.cartItems={...o},console.log(o)}$("#PickupInfo").modal("show")},async clearFormData(){this.formData={Nom:"",Ville:"",Adresse:"",nbrColis:"",Colis:1,Stock:0,id:"",cartItems:[],ClientID:"",Valid:"",Téléphone:""}},async submitFormAdd(){console.log("dta to add"),console.log(this.formData);const l=await A("https://api.gestion-livraison.pro/api/pickup/new",this.formData);l.data&&(this.formData={Nom:"",Ville:"",Adresse:"",nbrColis:"",Colis:1,Stock:0,id:"",cartItems:[],ClientID:"",Valid:"",Téléphone:""},$("#modalAdd").modal("hide"),this.data.push(l.data))},async getFetchData(l=null){this.loading=!0;let o=await F(this.apiUrl+l);this.data=o.data,this.pagination=o.pagination,this.data.length>0&&(this.tableFields=Object.keys(o.data[0])),this.loading=!1},addToCart(l){this.formData.cartItems.some(u=>u.id===l.id)?alertify.error("le produit est deja selectionne"):(l.qte=1,this.formData.cartItems.push(l))},removeFromCart(l){const o=this.formData.cartItems.findIndex(u=>u.id===l);o!==-1&&this.formData.cartItems.splice(o,1)},searchProductFilter(){console.log(this.searchInput);const l=this.searchInput.toLowerCase().trim();return console.log(l),l===""?this.products:this.products.filter(o=>(console.log(o.Titre),o.Titre.toLowerCase().includes(l)))}},computed:{loadPage(l){this.page=l;let o;this.filters?o=this.filters+"&page="+this.page+"&per_page="+this.per_page:o="?page="+this.page+"&per_page="+this.per_page,this.getFetchData(o)},pageCount(){let l;this.filters?l=this.filters+"&page="+this.page+"&per_page="+this.per_page:l="?page="+this.page+"&per_page="+this.per_page,this.getFetchData(l),console.log(l)},filteredProducts(){const l=this.searchInput.toLowerCase().trim(),o=this.formData.ClientID||"";if(V()=="customer")return l?!l||product.Titre.toLowerCase().includes(l):this.products;if(o&&o!=="")return console.log("yes cond "+o),this.products.filter(u=>{if(l){if(u.customer_id==o&&u.Titre.toLowerCase().includes(l))return u}else if(u.customer_id==o)return u})}},async mounted(){this.getFetchData(""),this.products=await k("https://api.gestion-livraison.pro/api/products"),console.log(this.products);var l=this;$("#modalAdd").on("shown.bs.modal",function(){l.clearFormData()})},watch:{filters_update(l){this.page=1,this.filters=l,this.getFetchData(l)},deletedRow(l){const o=this.data.findIndex(u=>u.id===parseInt(l));o!==-1&&this.data.splice(o,1)}}},a=l=>(P("data-v-64efbb39"),l=l(),j(),l),J={key:0,class:"table-responsive"},K={class:"table table-bordered"},W={class:"bg-light"},X=a(()=>e("th",null,"Ref",-1)),Y=a(()=>e("th",null,"Client",-1)),Z=a(()=>e("th",null,"Quantite",-1)),ee=a(()=>e("th",null,"Type",-1)),te={key:0},se=a(()=>e("th",null,"Date",-1)),oe=a(()=>e("th",null,"Action",-1)),le=a(()=>e("span",{class:"header_side"},"Ref : ",-1)),ae=["onClick"],ie=a(()=>e("span",{class:"header_side"},"Client : ",-1)),ne=a(()=>e("span",{class:"header_side"},"Quantite : ",-1)),de=a(()=>e("span",{class:"header_side"},"Type : ",-1)),re={key:0},ce=a(()=>e("span",{class:"header_side"},"Client : ",-1)),me={key:1},ue=a(()=>e("span",{class:"header_side"},"Type : ",-1)),_e=a(()=>e("span",{class:"header_side"},"Date : ",-1)),pe={class:"table_actions"},he={class:"d-flex align-items-center order-actions"},fe=["onClick"],ve=a(()=>e("i",{class:"fas fa-pencil-alt"},null,-1)),ge=[ve],be=["onClick"],Ce=a(()=>e("i",{class:"fas fa-trash-alt"},null,-1)),De=[Ce],ke={class:"row d-flex justify-content-between align-items-center"},ye={class:"col-md-1"},xe=q('<option value="10" data-v-64efbb39>10</option><option value="20" data-v-64efbb39>20</option><option value="50" data-v-64efbb39>50</option><option value="100" data-v-64efbb39>100</option><option value="200" data-v-64efbb39>200</option><option value="500" data-v-64efbb39>500</option><option value="1000" data-v-64efbb39>1000</option>',7),Ve=[xe],we={class:"col-md-6 d-flex justify-content-end align-items-center"},Ue={class:"pagination d-flex align-items-end"},Ie={key:0,class:"page-item"},Se=["onClick"],Te={key:1,class:"page-item"},Ne={key:1,class:"d-flex justify-content-center py-4 bg-light"},Ae=a(()=>e("span",{class:"loader"},null,-1)),Fe=[Ae],Re={key:2,class:"p-3 text-center bg-light"},Pe=a(()=>e("p",null,"no-data",-1)),je=[Pe],qe={id:"modalUpdate",class:"modal fade",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"},Me={class:"modal-dialog"},Le={class:"modal-content"},Qe=a(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title mt-0",id:"myModalLabel"},"Modifier ramassage"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Be={class:"modal-body"},ze={class:"row mt-4"},Ee={class:"col-md-6 text-center"},Oe={class:"row mt-4 mx-1"},Ge={class:"col-md-6 text-center"},He={class:"row mt-4 mx-1"},Je={class:"row"},Ke={key:2,class:"si_stock"},We={class:"row p-3 border-bottom"},Xe={class:"card"},Ye={class:"row"},Ze=a(()=>e("div",{class:"col-4 d-flex flex-row"},[e("img",{class:"img-fluid",src:"https://via.placeholder.com/300",alt:"Card image cap"})],-1)),$e={class:"list-group list-group-flush col-8"},et={class:"list-group-item"},tt={class:"d-flex flex-row justify-content-between align-items-center"},st={class:"d-flex flex-row"},ot={class:""},lt={class:"badge bg-success mx-3"},at=["onClick"],it=a(()=>e("i",{class:"fas fa-times"},null,-1)),nt=[it],dt={class:"list-group-item"},rt={class:"row d-flex align-items-center mt-4"},ct=a(()=>e("h5",{for:"validationCustom01",class:"form-label"},"Selectionner un Produit",-1)),mt={class:"col-md-12 mt-3"},ut={key:0},_t={class:"row p-3"},pt={class:"card"},ht={class:"row"},ft=a(()=>e("div",{class:"col-2 d-flex flex-row"},[e("img",{class:"img-fluid",src:"https://via.placeholder.com/300",alt:"Card image cap"})],-1)),vt={class:"list-group list-group-flush col-10"},gt={class:"list-group-item"},bt={class:"d-flex flex-row justify-content-between align-items-center"},Ct={class:"d-flex flex-row"},Dt={class:""},kt={class:"badge bg-success mx-3"},yt=["onClick"],xt=a(()=>e("i",{class:"fas fa-plus"},null,-1)),Vt=[xt],wt={key:1,class:"p-3 bg-light mt-4"},Ut=a(()=>e("p",null,"aucun resultat",-1)),It=[Ut],St={class:"modal-footer"},Tt=a(()=>e("button",{type:"button",class:"btn btn-secondary waves-effect waves-light","data-bs-dismiss":"modal"},"Fermer",-1)),Nt={id:"modalAdd",class:"modal fade",tabindex:"-1","aria-labelledby":"modalAdd","aria-hidden":"true"},At={class:"modal-dialog"},Ft={class:"modal-content"},Rt=a(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title mt-0",id:"modalAdd"},"Nouvelle Demande"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Pt={class:"modal-body"},jt={class:"row mt-4"},qt={class:"col-md-6 text-center"},Mt={class:"row mt-4 mx-1"},Lt={class:"col-md-6 text-center"},Qt={class:"row mt-4 mx-1"},Bt={class:"row"},zt={key:2,class:"si_stock"},Et={class:"row p-3 border-bottom"},Ot={class:"card"},Gt={class:"row"},Ht=a(()=>e("div",{class:"col-4 d-flex flex-row"},[e("img",{class:"img-fluid",src:"https://via.placeholder.com/300",alt:"Card image cap"})],-1)),Jt={class:"list-group list-group-flush col-8"},Kt={class:"list-group-item"},Wt={class:"d-flex flex-row justify-content-between align-items-center"},Xt={class:"d-flex flex-row"},Yt={class:""},Zt={class:"badge bg-success mx-3"},$t=["onClick"],es=a(()=>e("i",{class:"fas fa-times"},null,-1)),ts=[es],ss={class:"list-group-item"},os={class:"row d-flex align-items-center mt-4"},ls=a(()=>e("strong",{for:"validationCustom01",class:"form-label"},"Selectionner un Produit",-1)),as={class:"col-md-12 mt-3"},is={key:0},ns={class:"row p-3"},ds={class:"card"},rs={class:"row"},cs=a(()=>e("div",{class:"col-2 d-flex flex-row"},[e("img",{class:"img-fluid",src:"https://via.placeholder.com/300",alt:"Card image cap"})],-1)),ms={class:"list-group list-group-flush col-10"},us={class:"list-group-item"},_s={class:"d-flex flex-row justify-content-between align-items-center"},ps={class:"d-flex flex-row"},hs={class:""},fs={class:"badge bg-success mx-3"},vs=["onClick"],gs=a(()=>e("i",{class:"fas fa-plus"},null,-1)),bs=[gs],Cs={key:1,class:"p-3 bg-light mt-4"},Ds=a(()=>e("p",null,"aucun resultat",-1)),ks=[Ds],ys={class:"modal-footer"},xs=a(()=>e("button",{type:"button",class:"btn btn-secondary waves-effect waves-light","data-bs-dismiss":"modal"},"Fermer",-1)),Vs={id:"PickupInfo",class:"modal modal-lg fade",tabindex:"-1","aria-labelledby":"PickupInfolabel","aria-hidden":"true"},ws={class:"modal-dialog"},Us={class:"modal-content"},Is={class:"modal-header"},Ss={class:"modal-title mt-0",id:"PickupInfolabel"},Ts=a(()=>e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),Ns={class:"modal-body"},As={class:"mb-3"},Fs={class:"row"},Rs={class:"col-6 p-3 border"},Ps=a(()=>e("h6",null,"Nom ",-1)),js={class:"mx-4"},qs={class:"col-6 p-3 border"},Ms=a(()=>e("h6",null,"Téléphone ",-1)),Ls={class:"mx-4"},Qs={class:"col-6 p-3 border"},Bs=a(()=>e("h6",null,"Quantite ",-1)),zs={class:"mx-4"},Es={class:"col-6 p-3 border"},Os=a(()=>e("h6",null,"Ville ",-1)),Gs={class:"mx-4"},Hs={class:"col-md-12 p-3 border align-text-bottom"},Js=a(()=>e("h6",null,"Adresse ",-1)),Ks={class:"mx-4"},Ws={key:0,class:"my-3"},Xs=a(()=>e("h5",null,"Produits",-1)),Ys={class:"card p-3",style:{"box-shadow":"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px"}},Zs={class:"row"},$s={class:"col-md-1 col-2 d-flex flex-row"},eo=["src"],to={class:"col-10 d-flex align-items-center justify-content-between flex-row"},so={class:"d-flex flex-row text-start col-6 mx-1"},oo={class:""},lo={class:"d-flex align-items-end col-5"},ao={class:""},io=["href"],no=a(()=>e("i",{class:"fas fa-2x fa-phone-alt"},null,-1)),ro=[no],co=["href"],mo=a(()=>e("i",{class:"far fa-2x fa-envelope"},null,-1)),uo=[mo],_o=["href"],po=a(()=>e("i",{class:"fab fa-2x fa-whatsapp"},null,-1)),ho=[po];function fo(l,o,u,g,s,m){const b=C("checkd"),x=C("SelectDropdown"),_=C("input_text"),S=C("Supprimer");return i(),n(f,null,[s.data.length>0?(i(),n("div",J,[e("table",K,[e("thead",W,[e("tr",null,[X,Y,Z,ee,s.Role!="customer"&&s.Role!="deliveryman"?(i(),n("th",te,"Trait")):p("",!0),se,oe])]),e("tbody",null,[(i(!0),n(f,null,v(s.data,t=>(i(),n("tr",{key:t.id},[e("td",null,[le,e("a",{onClick:r=>m.openInfoModal(t),href:"","data-bs-toggle":"modal"},d(t.Ref),9,ae)]),e("td",null,[ie,h(" "+d(t.Client),1)]),e("td",null,[ne,h(" "+d(t.nbrColis),1)]),e("td",null,[de,h(" "+d(t.Colis?"Colis":"Stock"),1)]),s.Role!="customer"&&s.Role!="deliveryman"?(i(),n("td",re,[ce,h(),c(b,{modelValue:s.formData.Valid,"onUpdate:modelValue":o[0]||(o[0]=r=>s.formData.Valid=r),value:s.formData.Valid,Class_Content:"",id_check:`Ram-${t.Ref}`,is_checked:t.Valid,checked:t.Valid===1,"onUpdate:value":o[1]||(o[1]=r=>s.formData.Valid=r),onChange:r=>m.toggleValid(t)},null,8,["modelValue","value","id_check","is_checked","checked","onChange"])])):(i(),n("td",me,[ue,e("div",{class:U(`badge badge-success ${t.Valid===1?"bg-success ":"bg-danger "}`)},d(t.Valid===1?"Oui":"Non"),3)])),e("td",null,[_e,h(" "+d(new Date(t.Date).toLocaleString()),1)]),e("td",pe,[e("div",he,[e("button",{type:"button",class:"btn bg-light btn-sm waves-effect mx-1",onClick:r=>m.openUpdateModal(t)},ge,8,fe),e("button",{type:"button",class:"btn bg-light btn-sm waves-effect mx-1",onClick:r=>{s.delete_row_id=t.id},"data-bs-toggle":"modal","data-bs-target":"#DeleteRow"},De,8,be)])])]))),128))])]),e("div",ke,[e("div",ye,[y(e("select",{class:"form-control","onUpdate:modelValue":o[2]||(o[2]=t=>s.per_page=t),onChange:o[3]||(o[3]=(...t)=>m.pageCount&&m.pageCount(...t))},Ve,544),[[R,s.per_page]])]),e("nav",we,[e("ul",Ue,[s.pagination.current_page>1?(i(),n("li",Ie,[e("a",{class:"page-link",href:"#",onClick:o[4]||(o[4]=t=>m.loadPage(s.pagination.current_page-1))},"Précédent")])):p("",!0),(i(!0),n(f,null,v(s.pagination.last_page,t=>(i(),n("li",{class:U(["page-item",{active:t===s.pagination.current_page}]),key:t},[e("a",{class:"page-link",href:"#",onClick:r=>m.loadPage(t)},d(t),9,Se)],2))),128)),s.pagination.current_page<s.pagination.last_page?(i(),n("li",Te,[e("a",{class:"page-link",href:"#",onClick:o[5]||(o[5]=t=>m.loadPage(s.pagination.current_page+1))},"Suivant")])):p("",!0)])])])])):s.loading?(i(),n("div",Ne,Fe)):(i(),n("div",Re,je)),e("div",qe,[e("div",Me,[e("div",Le,[Qe,e("div",Be,[e("div",ze,[e("div",Ee,[e("div",Oe,[h(" Ramassage Colis "),c(b,{modelValue:s.formData.Colis,"onUpdate:modelValue":o[6]||(o[6]=t=>s.formData.Colis=t),value:s.formData.Colis,id_check:"is_colis",Class_Content:"col-md-1 mb-1 mb-sm-0 mx-1",is_checked:s.formData.Colis,checked:s.formData.Colis===1,"onUpdate:value":o[7]||(o[7]=t=>{s.formData.Colis=t})},null,8,["modelValue","value","is_checked","checked"])])]),e("div",Ge,[e("div",He,[h(" Ramassage Stock "),c(b,{modelValue:s.formData.Stock,"onUpdate:modelValue":o[8]||(o[8]=t=>s.formData.Stock=t),value:s.formData.Stock,id_check:"is_Stock",Class_Content:"col-md-1 mb-1 mb-sm-0 mx-1",is_checked:s.formData.Stock,checked:s.formData.Stock===1,"onUpdate:value":o[9]||(o[9]=t=>{s.formData.Stock=t})},null,8,["modelValue","value","is_checked","checked"])])])]),s.Role!="customer"?(i(),D(x,{key:0,modelValue:s.formData.ClientID,"onUpdate:modelValue":o[10]||(o[10]=t=>s.formData.ClientID=t),value:s.formData.ClientID,apiUrl:"https://api.gestion-livraison.pro/api/customers",fieldName:"Nom",first_option:"Selectionner le Client",label:"Client",Class_Content:"col-md-12 mt-4","onUpdate:value":o[11]||(o[11]=t=>s.formData.ClientID=t)},null,8,["modelValue","value"])):p("",!0),e("div",Je,[c(_,{modelValue:s.formData.Nom,"onUpdate:modelValue":o[12]||(o[12]=t=>s.formData.Nom=t),label:"Nom",type:"text",Class_Content:"col-md-6 mt-4",value:s.formData.Nom,"onUpdate:value":o[13]||(o[13]=t=>s.formData.Nom=t)},null,8,["modelValue","value"]),c(_,{modelValue:s.formData.Téléphone,"onUpdate:modelValue":o[14]||(o[14]=t=>s.formData.Téléphone=t),label:"Téléphone",type:"text",Class_Content:"col-md-6 mt-4",value:s.formData.Téléphone,"onUpdate:value":o[15]||(o[15]=t=>s.formData.Téléphone=t)},null,8,["modelValue","value"])]),c(_,{modelValue:s.formData.Ville,"onUpdate:modelValue":o[16]||(o[16]=t=>s.formData.Ville=t),label:"Ville",type:"text",Class_Content:"col-md-12 mt-4",value:s.formData.Ville,"onUpdate:value":o[17]||(o[17]=t=>s.formData.Ville=t)},null,8,["modelValue","value"]),c(_,{modelValue:s.formData.Adresse,"onUpdate:modelValue":o[18]||(o[18]=t=>s.formData.Adresse=t),label:"Adresse",type:"text",Class_Content:"col-md-12 mt-4",value:s.formData.Adresse,"onUpdate:value":o[19]||(o[19]=t=>s.formData.Adresse=t)},null,8,["modelValue","value"]),s.formData.nbrColis?(i(),D(_,{key:1,modelValue:s.formData.nbrColis,"onUpdate:modelValue":o[20]||(o[20]=t=>s.formData.nbrColis=t),label:"Nombre des Colis",type:"text",Class_Content:"col-md-12 mt-4",value:s.formData.nbrColis,"onUpdate:value":o[21]||(o[21]=t=>s.formData.nbrColis=t)},null,8,["modelValue","value"])):p("",!0),s.formData.Stock?(i(),n("div",Ke,[e("div",We,[(i(!0),n(f,null,v(s.formData.cartItems,t=>(i(),n("div",{key:t.id,class:"col-md-12"},[e("div",Xe,[e("div",Ye,[Ze,e("ul",$e,[e("li",et,[e("div",tt,[e("div",st,[e("strong",ot,d(t.Titre),1),e("span",lt,d(t.Quantite),1)]),e("button",{class:"btn btn-danger m-0 0-0",onClick:r=>m.removeFromCart(t.id)},nt,8,at)])]),e("li",dt,[c(_,{modelValue:t.qte,"onUpdate:modelValue":r=>t.qte=r,type:"number",Class_Content:"col-md-12 d-flex flex-row align-items-center justify-content-between",value:t.qte,"onUpdate:value":r=>t.qte=r},null,8,["modelValue","onUpdate:modelValue","value","onUpdate:value"])])])])])]))),128))]),e("div",rt,[ct,e("div",mt,[y(e("input",{type:"text",class:"form-control",id:"validationCustom01",placeholder:"Mark","onUpdate:modelValue":o[22]||(o[22]=t=>s.searchInput=t)},null,512),[[I,s.searchInput]])])]),s.products.length?(i(),n("div",ut,[e("div",_t,[(i(!0),n(f,null,v(m.filteredProducts,t=>(i(),n("div",{key:t.id,class:"col-md-12"},[e("div",pt,[e("div",ht,[ft,e("ul",vt,[e("li",gt,[e("div",bt,[e("div",Ct,[e("strong",Dt,d(t.Titre),1),e("span",kt,d(t.Quantite),1)]),e("div",null,[e("button",{class:"btn btn-primary w-100",onClick:r=>m.addToCart(t)},Vt,8,yt)])])])])])])]))),128))])])):(i(),n("div",wt,It))])):p("",!0)]),e("div",St,[Tt,e("button",{onClick:o[23]||(o[23]=(...t)=>m.submitFormUpdate&&m.submitFormUpdate(...t)),class:"btn btn-primary waves-effect waves-light"},"Modifier")])])])]),e("div",Nt,[e("div",At,[e("div",Ft,[Rt,e("div",Pt,[e("div",jt,[e("div",qt,[e("div",Mt,[h(" Ramassage Colis "),c(b,{modelValue:l.Colis,"onUpdate:modelValue":o[24]||(o[24]=t=>l.Colis=t),value:s.formData.Colis,id_check:"is_colis",Class_Content:"col-md-1 mb-1 mb-sm-0 mx-1",is_checked:s.formData.Colis,checked:s.formData.Colis===1,"onUpdate:value":o[25]||(o[25]=t=>{s.formData.Colis=t,s.formData.Stock=!s.formData.Colis})},null,8,["modelValue","value","is_checked","checked"])])]),e("div",Lt,[e("div",Qt,[h(" Ramassage Stock "),c(b,{modelValue:l.Stock,"onUpdate:modelValue":o[26]||(o[26]=t=>l.Stock=t),value:s.formData.Stock,id_check:"Ram-stock",Class_Content:"col-md-1 mb-1 mb-sm-0 mx-1",is_checked:s.formData.Stock,checked:s.formData.Stock===1,"onUpdate:value":o[27]||(o[27]=t=>{s.formData.Stock=t,s.formData.Colis=!s.formData.Stock})},null,8,["modelValue","value","is_checked","checked"])])])]),s.Role!="customer"?(i(),D(x,{key:0,modelValue:l.ClientID,"onUpdate:modelValue":o[28]||(o[28]=t=>l.ClientID=t),value:s.formData.ClientID,apiUrl:"https://api.gestion-livraison.pro/api/customers",fieldName:"Nom",first_option:"Selectionner le Client",label:"Client",Class_Content:"col-md-12 mt-4","onUpdate:value":o[29]||(o[29]=t=>s.formData.ClientID=t)},null,8,["modelValue","value"])):p("",!0),e("div",Bt,[c(_,{modelValue:s.formData.Nom,"onUpdate:modelValue":o[30]||(o[30]=t=>s.formData.Nom=t),label:"Nom",type:"text",Class_Content:"col-md-6 mt-4",value:s.formData.Nom,"onUpdate:value":o[31]||(o[31]=t=>s.formData.Nom=t)},null,8,["modelValue","value"]),c(_,{modelValue:s.formData.Téléphone,"onUpdate:modelValue":o[32]||(o[32]=t=>s.formData.Téléphone=t),label:"Téléphone",type:"text",Class_Content:"col-md-6 mt-4",value:s.formData.Téléphone,"onUpdate:value":o[33]||(o[33]=t=>s.formData.Téléphone=t)},null,8,["modelValue","value"])]),c(_,{modelValue:s.formData.Ville,"onUpdate:modelValue":o[34]||(o[34]=t=>s.formData.Ville=t),label:"Ville",type:"text",Class_Content:"col-md-12 mt-4",value:s.formData.Ville,"onUpdate:value":o[35]||(o[35]=t=>s.formData.Ville=t)},null,8,["modelValue","value"]),c(_,{modelValue:s.formData.Adresse,"onUpdate:modelValue":o[36]||(o[36]=t=>s.formData.Adresse=t),label:"Adresse",type:"text",Class_Content:"col-md-12 mt-4",value:s.formData.Adresse,"onUpdate:value":o[37]||(o[37]=t=>s.formData.Adresse=t)},null,8,["modelValue","value"]),s.formData.Colis?(i(),D(_,{key:1,modelValue:s.formData.nbrColis,"onUpdate:modelValue":o[38]||(o[38]=t=>s.formData.nbrColis=t),label:"Nombre des Colis",type:"text",Class_Content:"col-md-12 mt-4",value:s.formData.nbrColis,"onUpdate:value":o[39]||(o[39]=t=>s.formData.nbrColis=t)},null,8,["modelValue","value"])):p("",!0),s.formData.Stock?(i(),n("div",zt,[e("div",Et,[(i(!0),n(f,null,v(s.formData.cartItems,t=>(i(),n("div",{key:t.id,class:"col-md-12"},[e("div",Ot,[e("div",Gt,[Ht,e("ul",Jt,[e("li",Kt,[e("div",Wt,[e("div",Xt,[e("strong",Yt,d(t.Titre),1),e("span",Zt,d(t.Quantite),1)]),e("button",{class:"btn btn-danger m-0 0-0",onClick:r=>m.removeFromCart(t.id)},ts,8,$t)])]),e("li",ss,[c(_,{modelValue:t.qte,"onUpdate:modelValue":r=>t.qte=r,type:"number",Class_Content:"col-md-12 d-flex flex-row align-items-center justify-content-between",value:t.qte,"onUpdate:value":r=>t.qte=r},null,8,["modelValue","onUpdate:modelValue","value","onUpdate:value"])])])])])]))),128))]),e("div",os,[ls,e("div",as,[y(e("input",{type:"text",class:"form-control",id:"validationCustom01",placeholder:"Produit...","onUpdate:modelValue":o[40]||(o[40]=t=>s.searchInput=t)},null,512),[[I,s.searchInput]])])]),s.products.length?(i(),n("div",is,[e("div",ns,[(i(!0),n(f,null,v(m.filteredProducts,t=>(i(),n("div",{key:t.id},[e("div",ds,[e("div",rs,[cs,e("ul",ms,[e("li",us,[e("div",_s,[e("div",ps,[e("strong",hs,d(t.Titre),1),e("span",fs,d(t.Quantite),1)]),e("div",null,[e("button",{class:"btn btn-primary w-100",onClick:r=>m.addToCart(t)},bs,8,vs)])])])])])])]))),128))])])):(i(),n("div",Cs,ks))])):p("",!0)]),e("div",ys,[xs,e("button",{type:"submit",class:"btn btn-primary waves-effect waves-light",onClick:o[41]||(o[41]=(...t)=>m.submitFormAdd&&m.submitFormAdd(...t))},"Ajouter")])])])]),e("div",Vs,[e("div",ws,[e("div",Us,[e("div",Is,[e("h5",Ss,"Ramassage "+d(s.formData.Ref),1),Ts]),e("div",Ns,[e("div",As,[e("div",Fs,[e("div",Rs,[Ps,e("p",js,d(s.formData?s.formData.Nom:""),1)]),e("div",qs,[Ms,e("p",Ls,d(s.formData?s.formData.Téléphone:""),1)]),e("div",Qs,[Bs,e("p",zs,d(s.formData?s.formData.nbrColis:""),1)]),e("div",Es,[Os,e("p",Gs,d(s.formData?s.formData.Ville:""),1)]),e("div",Hs,[Js,e("p",Ks,d(s.formData?s.formData.Adresse:""),1)])])]),s.formData&&s.formData.cartItems?(i(),n("div",Ws,[Xs,(i(!0),n(f,null,v(s.formData.cartItems,t=>(i(),n("div",{class:"row",key:t.id},[e("div",null,[e("div",Ys,[e("div",Zs,[e("div",$s,[e("img",{class:"rounded-5 avatar-sm",src:t.Image??"https://via.placeholder.com/300",alt:"Card image cap"},null,8,eo)]),e("div",to,[e("div",so,[e("strong",oo,d(t?t.Titre:"")+" x "+d(t?t.qte:""),1)]),e("div",lo,[e("span",null,"Type : "+d(t?t.Type:""),1)])])])])])]))),128))])):p("",!0)]),e("div",ao,[e("a",{href:"tel:"+(s.formData?s.formData.Téléphone:""),class:"btn btn-success waves-effect waves-light col-4"},ro,8,io),e("a",{href:"sms:"+(s.formData?s.formData.Téléphone:"")+"?body=Bonjour",class:"btn btn-primary waves-effect waves-light col-4"},uo,8,co),e("a",{href:"https://wa.me/"+(s.formData?s.formData.Téléphone:""),target:"__blank",class:"btn btn-primary waves-effect waves-light col-4 btn-whatsapp"},ho,8,_o)])])])]),c(S,{apiUrl:`https://api.gestion-livraison.pro/api/pickup/${s.delete_row_id}/delete`,onDeletedId:o[42]||(o[42]=t=>s.deletedRow=t)},null,8,["apiUrl"])],64)}const vo=T(H,[["render",fo],["__scopeId","data-v-64efbb39"]]),go={class:"main-content"},bo={class:"page-content"},Co={class:"container-fluid"},Do={class:"card"},ko={class:"card-body"},yo={class:"mb-3"},xo={class:"table-responsive mt-3"},Ro={__name:"liste_of_pickups",setup(l){const o=M(null);return(u,g)=>(i(),n("div",go,[e("div",bo,[e("div",Co,[c(O,{pageTitle:"Liste des Ramassages",toggle:"modal",target:"#modalAdd",modalText:"Nouvelle Demande"}),e("div",Do,[e("div",ko,[e("div",yo,[c(G,{placeholder:"Rechercher par Motcle",onFilterUpdated:g[0]||(g[0]=s=>o.value=s),filters_fields:"customer,search,date"})]),e("div",xo,[c(vo,{apiUrl:"https://api.gestion-livraison.pro/api/pickups",filters_update:o.value,hidden_columns:["id","Valid"]},null,8,["filters_update"])])])])])])]))}};export{Ro as default};
